<script>
  Polymer.Dart = {};
  // TODO(jakemac): Don't pass anything to this constructor until
  // http://dartbug.com/23514 gets fixed, its to slow.
  Polymer.Dart.Base = function() {};
  Polymer.Dart.Base.prototype = {
    __proxy__: null,
    getAttribute: function(name) {
      return this.__proxy__.getAttribute(name);
    },
    hasAttribute: function(name) {
      return this.__proxy__.hasAttribute(name);
    },
    setAttribute: function(name, value) {
      return this.__proxy__.setAttribute(name, value);
    },
    removeAttribute: function(name) {
      return this.__proxy__.removeAttribute(name);
    },
    get attributes () {
      return this.__proxy__.attributes;
    },
    get childNodes() {
      return this.__proxy__.childNodes;
    },
    appendChild: function(node) {
      return this.__proxy__.appendChild(node);
    },
    get innerHTML() {
      return this.__proxy__.innerHTML;
    },
    set innerHTML(html) {
      return this.__proxy__.innerHTML = html;
    },
    get textContent() {
      return this.__proxy__.textContent;
    },
    set textContent(text) {
      return this.__proxy__.textContent = text;
    },
    addEventListener: function(event, callback) {
      return this.__proxy__.addEventListener(event, callback);
    },
    dispatchEvent: function(event) {
      return this.__proxy__.dispatchEvent(event);
    },
    get localName() {
      return this.__proxy__.localName;
    },
    get nodeType() {
      return this.__proxy__.nodeType;
    },
    get nextSibling() {
      return this.__proxy__.nextSibling;
    },
    insertBefore: function(node, ref_node) {
      return this.__proxy__.insertBefore(node, ref_node);
    }
  };
  Polymer.Dart.Base.__setup__ = function() {
    Polymer.Base.extend(Polymer.Dart.Base.prototype, Polymer.Base);

    if (Polymer.Bind) {
      // Overwrite prepareInstance to a no-op for dart elements.
      Polymer.Bind._originalPrepareInstance = Polymer.Bind.prepareInstance;
      Polymer.Bind.prepareInstance = function (inst) {
        if (typeof(inst.__proxy__) !== 'undefined') return;
        this._originalPrepareInstance(inst);
      }
    }
  };
  Polymer.Dart.functionFactory = function() { return function() {}; };

  // Have to pass an actual element to the native insertBefore.
  Element.prototype._originalInsertBefore = Element.prototype.insertBefore;
  Element.prototype.insertBefore = function(node, ref_node) {
    if (typeof(this.__proxy__) !== 'undefined') {
      this.__proxy__._originalInsertBefore(node, ref_node);
    } else {
      this._originalInsertBefore(node, ref_node);
    }
  };
</script>
